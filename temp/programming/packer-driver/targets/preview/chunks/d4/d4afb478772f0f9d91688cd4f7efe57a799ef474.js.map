{"version":3,"sources":["file:///D:/Cocos/CocosSolitaireCreative/assets/scripts/ui/ScreenScaler.ts"],"names":["_decorator","Component","Node","screen","Vec2","view","ccclass","property","ScreenScaler","type","originalWidth","originalHeigth","lettersVerticalOffset","cardsVerticalOffset","wordsVerticalOffset","playHorizontalOffset","playVerticalOffset","iconHorizontalOffset","iconVerticalOffset","originalRatio","horizontalState","originalLetterContainerPosition","originalCardContainerPosition","originalCompletedWordsContainerPosition","originalPlayWidgetPosition","originalWinPosition","originalLetterContainerScale","originalCardContainerScale","originalCompletedWordsContainerScale","originalBackgroundScale","originalPlayWidgetScale","originalWinScale","start","letterContainer","getPosition","cardContainer","completedWordsContainer","playWidget","win","getScale","clone","background","onWindowResize","onLoad","on","onDestroy","off","visibleSize","getVisibleSize","width","height","heightRatio","widthRatio","scale","Math","max","setScale","x","y","setPosition","position","currentHorizontalState","console","log"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, screen, Vec2, Vec3, view, ResolutionPolicy, Widget, Canvas } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('ScreenScaler')\r\nexport class ScreenScaler extends Component {\r\n\r\n    @property({type: Node})\r\n    private letterContainer: Node = null;\r\n\r\n    @property({type: Node})\r\n    private cardContainer: Node = null;\r\n    \r\n    @property({type: Node})\r\n    private completedWordsContainer: Node = null;\r\n\r\n    @property({type: Node})\r\n    private playWidget: Node = null;\r\n\r\n    @property({type: Node})\r\n    private iconWidget: Node = null;\r\n\r\n    @property({type: Node})\r\n    private background: Node = null;\r\n    @property({type: Node})\r\n    private constName: Node = null;\r\n    @property({type: Node})\r\n    private sentences: Node = null;\r\n\r\n    @property({type: Node})\r\n    private win: Node = null;\r\n\r\n    private originalWidth: number = 1920;\r\n    private originalHeigth: number = 1080;\r\n    \r\n    private lettersVerticalOffset: number = 110;\r\n    private cardsVerticalOffset: number = 100;\r\n    private wordsVerticalOffset: number = 100;\r\n    private playHorizontalOffset: Vec2 = new Vec2(50, 50);\r\n    private playVerticalOffset: Vec2 = new Vec2(240, -120);\r\n\r\n    private iconHorizontalOffset: Vec2 = new Vec2(50, 50);\r\n    private iconVerticalOffset: Vec2 = new Vec2(240, -120);\r\n\r\n    private originalRatio: number = this.originalHeigth / this.originalWidth;\r\n    private horizontalState: boolean = true;\r\n\r\n    private originalLetterContainerPosition: Vec3;\r\n    private originalCardContainerPosition: Vec3;\r\n    private originalCompletedWordsContainerPosition: Vec3;\r\n    private originalPlayWidgetPosition: Vec3;\r\n    private originalWinPosition: Vec3;\r\n\r\n    private originalLetterContainerScale: Vec3;\r\n    private originalCardContainerScale: Vec3;\r\n    private originalCompletedWordsContainerScale: Vec3;\r\n    private originalBackgroundScale: Vec3;\r\n    private originalPlayWidgetScale: Vec3;\r\n    private originalWinScale: Vec3;\r\n\r\n    start() {\r\n        this.originalLetterContainerPosition = this.letterContainer.getPosition();\r\n        this.originalCardContainerPosition = this.cardContainer.getPosition();\r\n        this.originalCompletedWordsContainerPosition = this.completedWordsContainer.getPosition();\r\n        this.originalPlayWidgetPosition = this.playWidget.getPosition();\r\n        this.originalWinPosition = this.win.getPosition();\r\n\r\n        this.originalLetterContainerScale = this.letterContainer.getScale().clone();\r\n        this.originalCardContainerScale = this.cardContainer.getScale().clone();\r\n        this.originalCompletedWordsContainerScale = this.completedWordsContainer.getScale().clone();\r\n        this.originalBackgroundScale = this.background.getScale().clone();\r\n        this.originalPlayWidgetScale = this.playWidget.getScale().clone();\r\n        this.originalWinScale = this.win.getScale().clone();\r\n        \r\n        this.onWindowResize();\r\n    }\r\n\r\n    onLoad() {\r\n        screen.on('window-resize', this.onWindowResize, this);\r\n    }\r\n    \r\n    onDestroy() {\r\n        screen.off('window-resize', this.onWindowResize, this);\r\n    }\r\n\r\n    onWindowResize() {\r\n        const visibleSize = view.getVisibleSize();\r\n        const width = visibleSize.width;\r\n        const height = visibleSize.height;\r\n\r\n        const heightRatio = height / this.originalHeigth;\r\n        const widthRatio = width / this.originalWidth;\r\n        const scale = Math.max(heightRatio, widthRatio);\r\n    \r\n\r\n        this.letterContainer.setScale(\r\n            this.originalLetterContainerScale.x * scale,\r\n            this.originalLetterContainerScale.y * scale\r\n        );\r\n        \r\n        this.cardContainer.setScale(\r\n            this.originalCardContainerScale.x* scale,\r\n            this.originalCardContainerScale.y * scale\r\n        );\r\n        \r\n    \r\n        this.completedWordsContainer.setScale(\r\n            this.originalCompletedWordsContainerScale.x * scale,\r\n            this.originalCompletedWordsContainerScale.y * scale\r\n        );\r\n        \r\n    \r\n        this.background.setScale(\r\n            this.originalBackgroundScale.x * scale,\r\n            this.originalBackgroundScale.y * scale\r\n        );\r\n        this.background.setPosition(\r\n            this.background.position.x,\r\n            this.background.position.y\r\n        );\r\n    \r\n        this.playWidget.setScale(\r\n            this.originalPlayWidgetScale.x * scale/1.5,\r\n            this.originalPlayWidgetScale.y * scale/1.5\r\n        );\r\n    \r\n        this.win.setScale(\r\n            this.originalWinScale.x * scale,\r\n            this.originalWinScale.y * scale\r\n        );\r\n\r\n    \r\n        const currentHorizontalState = width >= height;\r\n\r\n        if (currentHorizontalState !== this.horizontalState) {\r\n            this.horizontalState = currentHorizontalState;\r\n    \r\n            if (currentHorizontalState) {\r\n\r\n                this.playWidget.setPosition(\r\n                    this.originalPlayWidgetPosition.x * width/height, \r\n                    this.originalPlayWidgetPosition.y\r\n                );\r\n                this.win.setPosition(\r\n                    this.originalWinPosition.x * width/height,\r\n                    this.originalWinPosition.y\r\n                );\r\n            }\r\n            else{\r\n                this.letterContainer.setPosition(\r\n                    this.originalLetterContainerPosition.x * scale,\r\n                    (this.originalLetterContainerPosition.y + this.lettersVerticalOffset) * scale\r\n                );\r\n                this.cardContainer.setPosition(\r\n                    this.originalCardContainerPosition.x * scale,\r\n                    (this.originalCardContainerPosition.y + this.cardsVerticalOffset) * scale\r\n                );\r\n                this.completedWordsContainer.setPosition(\r\n                    this.originalCompletedWordsContainerPosition.x * scale,\r\n                    (this.originalCompletedWordsContainerPosition.y + this.wordsVerticalOffset)* scale\r\n                );\r\n\r\n                this.playWidget.setPosition(\r\n                    this.originalPlayWidgetPosition.x,\r\n                    this.originalPlayWidgetPosition.y\r\n                );\r\n                this.win.setPosition(\r\n                    this.originalWinPosition.x,\r\n                    this.originalWinPosition.y\r\n                );\r\n            }\r\n        }\r\n       \r\n        console.log(`Screen resized: width=${width}, height=${height}, scale=${scale}`);\r\n    }\r\n    \r\n    \r\n    \r\n    \r\n    \r\n}\r\n"]}