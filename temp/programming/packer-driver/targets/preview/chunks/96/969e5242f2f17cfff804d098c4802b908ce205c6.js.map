{"version":3,"sources":["file:///D:/Cocos/CocosSolitaireCreative/assets/scripts/ui/LettersLabelComponent.ts"],"names":["_decorator","Animation","Component","Label","UITransform","ccclass","property","LettersLabelComponent","type","transform","labelTransform","text","originalPosition","playingAnimation","start","getComponent","label","node","getPosition","animation","on","EventType","FINISHED","onAnimationFinished","STOP","onAnimationStop","updateText","string","toUpperCase","width","stop","lateUpdate","wrongWordShake","play","state","setPosition"],"mappings":";;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAA2BC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,K,OAAAA,K;AAAaC,MAAAA,W,OAAAA,W;;;;;;;;;OAClE;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;;uCAGjBO,qB,WADZF,OAAO,CAAC,uBAAD,C,UAGHC,QAAQ,CAAC;AAACE,QAAAA,IAAI,EAACL;AAAN,OAAD,C,UAGRG,QAAQ,CAAC;AAACE,QAAAA,IAAI,EAACP;AAAN,OAAD,C,2BANb,MACaM,qBADb,SAC2CL,SAD3C,CACqD;AAAA;AAAA;;AAAA;;AAAA;;AAAA,eAQzCO,SARyC;AAAA,eASzCC,cATyC;AAAA,eAUzCC,IAVyC;AAAA,eAWzCC,gBAXyC;AAAA,eAYzCC,gBAZyC;AAAA;;AAcjDC,QAAAA,KAAK,GAAG;AACJ,eAAKL,SAAL,GAAiB,KAAKM,YAAL,CAAkBX,WAAlB,CAAjB;AACA,eAAKM,cAAL,GAAsB,KAAKM,KAAL,CAAWD,YAAX,CAAwBX,WAAxB,CAAtB;AACA,eAAKQ,gBAAL,GAAwB,KAAKK,IAAL,CAAUC,WAAV,EAAxB;AAEA,eAAKC,SAAL,CAAeC,EAAf,CAAkBnB,SAAS,CAACoB,SAAV,CAAoBC,QAAtC,EAAgD,KAAKC,mBAArD,EAA0E,IAA1E;AACA,eAAKJ,SAAL,CAAeC,EAAf,CAAkBnB,SAAS,CAACoB,SAAV,CAAoBG,IAAtC,EAA4C,KAAKC,eAAjD,EAAkE,IAAlE;AAEA,eAAKC,UAAL,CAAgB,IAAhB;AACH;;AAEDA,QAAAA,UAAU,CAACf,IAAD,EAAe;AACrB,eAAKA,IAAL,GAAYA,IAAZ;;AAEA,cAAIA,IAAJ,EAAU;AACN,iBAAKK,KAAL,CAAWW,MAAX,GAAoBhB,IAAI,CAACiB,WAAL,EAApB;AACH,WAFD,MAGK;AACD,iBAAKnB,SAAL,CAAeoB,KAAf,GAAuB,CAAvB;AACA,iBAAKnB,cAAL,CAAoBmB,KAApB,GAA4B,CAA5B;AACA,iBAAKb,KAAL,CAAWW,MAAX,GAAoB,EAApB;AACH;;AAED,cAAI,KAAKd,gBAAT,EAA2B;AACvB,iBAAKM,SAAL,CAAeW,IAAf;AACA,iBAAKjB,gBAAL,GAAwB,KAAxB;AACH;AACJ;;AAEDkB,QAAAA,UAAU,GAAG;AACT,cAAI,CAAC,KAAKpB,IAAV,EAAgB;AAChB,eAAKF,SAAL,CAAeoB,KAAf,GAAuB,KAAKnB,cAAL,CAAoBmB,KAApB,GAA4B,EAAnD;AACH;;AAEDG,QAAAA,cAAc,GAAG;AACb,eAAKnB,gBAAL,GAAwB,IAAxB;AACA,eAAKM,SAAL,CAAec,IAAf;AACH;;AAEDV,QAAAA,mBAAmB,CAACf,IAAD,EAA4B0B,KAA5B,EAAmD;AAClE,eAAKR,UAAL,CAAgB,IAAhB;AACA,eAAKb,gBAAL,GAAwB,KAAxB;AACH;;AAEDY,QAAAA,eAAe,CAACjB,IAAD,EAA4B0B,KAA5B,EAAmD;AAC9D,eAAKjB,IAAL,CAAUkB,WAAV,CAAsB,KAAKvB,gBAA3B;AACA,eAAKC,gBAAL,GAAwB,KAAxB;AACH;;AA7DgD,O;;;;;iBAGjC,I;;;;;;;iBAGI,I","sourcesContent":["import { _decorator, Animation, AnimationState, Component, Label, Node, UITransform, Vec3, tween, Tween } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('LettersLabelComponent')\r\nexport class LettersLabelComponent extends Component {\r\n\r\n    @property({type:Label})\r\n    private label = null;\r\n\r\n    @property({type:Animation})\r\n    private animation = null;\r\n\r\n    private transform: UITransform;\r\n    private labelTransform: UITransform;\r\n    private text: string;\r\n    private originalPosition: Vec3;\r\n    private playingAnimation: boolean;\r\n\r\n    start() {\r\n        this.transform = this.getComponent(UITransform);\r\n        this.labelTransform = this.label.getComponent(UITransform);\r\n        this.originalPosition = this.node.getPosition();\r\n\r\n        this.animation.on(Animation.EventType.FINISHED, this.onAnimationFinished, this);\r\n        this.animation.on(Animation.EventType.STOP, this.onAnimationStop, this);\r\n\r\n        this.updateText(null);\r\n    }\r\n\r\n    updateText(text: string) {\r\n        this.text = text;\r\n\r\n        if (text) {\r\n            this.label.string = text.toUpperCase();\r\n        }\r\n        else {\r\n            this.transform.width = 0;\r\n            this.labelTransform.width = 0;\r\n            this.label.string = '';\r\n        }\r\n\r\n        if (this.playingAnimation) {\r\n            this.animation.stop();\r\n            this.playingAnimation = false;\r\n        }\r\n    }\r\n\r\n    lateUpdate() {\r\n        if (!this.text) return;\r\n        this.transform.width = this.labelTransform.width + 50;\r\n    }\r\n\r\n    wrongWordShake() {\r\n        this.playingAnimation = true;\r\n        this.animation.play();\r\n    }\r\n\r\n    onAnimationFinished(type: Animation.EventType, state: AnimationState) {\r\n        this.updateText(null);\r\n        this.playingAnimation = false;\r\n    }\r\n\r\n    onAnimationStop(type: Animation.EventType, state: AnimationState) {\r\n        this.node.setPosition(this.originalPosition);\r\n        this.playingAnimation = false;\r\n    }\r\n}\r\n\r\n"]}