{"version":3,"sources":["file:///D:/Cocos/work/CocosSolitaireCreative/assets/scripts/ui/ScreenScaler.ts"],"names":["_decorator","Component","Node","screen","view","ResolutionPolicy","Widget","ccclass","property","ScreenScaler","type","originalWidth","originalHeigth","originalRatio","horizontalState","originalLetterContainerPosition","originalCardContainerPosition","originalCompletedWordsContainerPosition","originalWordsContainerPosition","originalPlayWidgetRight","originalLetterContainerScale","start","letterContainer","getPosition","cardContainer","completedWordsContainer","wordsContainer","getScale","clone","playWidget","getComponent","right","onWindowResize","windowSize","width","height","onLoad","on","onDestroy","off","currentHorizontalState","ratio","scale","setDesignResolutionSize","FIXED_WIDTH","setPosition","x","y","FIXED_HEIGHT","setScale","win","constName","sentences","background","console","log"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, screen, Vec2, Vec3, view, ResolutionPolicy, Widget, Canvas } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('ScreenScaler')\r\nexport class ScreenScaler extends Component {\r\n\r\n    @property({type: Node})\r\n    private letterContainer: Node = null;\r\n\r\n    @property({type: Node})\r\n    private cardContainer: Node = null;\r\n    \r\n    @property({type: Node})\r\n    private completedWordsContainer: Node = null;\r\n\r\n    @property(Node)\r\n    private wordsContainer: Node = null;\r\n\r\n    @property({type: Node})\r\n    private playWidget: Node = null;\r\n\r\n    @property({type: Node})\r\n    private iconWidget: Node = null;\r\n\r\n    @property({type: Node})\r\n    private background: Node = null;\r\n    @property({type: Node})\r\n    private constName: Node = null;\r\n    @property({type: Node})\r\n    private sentences: Node = null;\r\n\r\n    @property({type: Node})\r\n    private win: Node = null;\r\n\r\n\r\n\r\n    private originalWidth: number = 1920;\r\n    private originalHeigth: number = 1080;\r\n    \r\n\r\n    private originalRatio: number = this.originalHeigth / this.originalWidth;\r\n    private horizontalState: boolean = true;\r\n\r\n    private originalLetterContainerPosition: Vec3;\r\n    private originalCardContainerPosition: Vec3;\r\n    private originalCompletedWordsContainerPosition: Vec3;\r\n    private originalWordsContainerPosition: Vec3;\r\n\r\n\r\n    private originalPlayWidgetRight: number;\r\n\r\n    private originalLetterContainerScale: Vec3;\r\n\r\n\r\n    start() {\r\n        this.originalLetterContainerPosition = this.letterContainer.getPosition();\r\n        this.originalCardContainerPosition = this.cardContainer.getPosition();\r\n        this.originalCompletedWordsContainerPosition = this.completedWordsContainer.getPosition();\r\n        this.originalWordsContainerPosition = this.wordsContainer.getPosition();\r\n\r\n\r\n        this.originalLetterContainerScale = this.letterContainer.getScale().clone();\r\n\r\n        this.originalPlayWidgetRight =  this.playWidget.getComponent(Widget).right;\r\n        \r\n        this.onWindowResize(screen.windowSize.width, screen.windowSize.height);\r\n    }\r\n\r\n    onLoad() {\r\n        screen.on('window-resize', this.onWindowResize, this);\r\n    }\r\n    \r\n    onDestroy() {\r\n        screen.off('window-resize', this.onWindowResize, this);\r\n    }\r\n\r\n    onWindowResize(width: number, height: number) {\r\n        \r\n        const currentHorizontalState = width >= height;\r\n\r\n        const ratio = currentHorizontalState ? height / width : width / height;\r\n        let scale = ratio / this.originalRatio;\r\n        if (scale > 1) scale = 1;\r\n\r\n\r\n        if (currentHorizontalState != this.horizontalState) {\r\n\r\n            this.horizontalState = currentHorizontalState;\r\n\r\n            if (currentHorizontalState) {\r\n                view.setDesignResolutionSize(this.originalWidth, this.originalHeigth, ResolutionPolicy.FIXED_WIDTH);\r\n\r\n                this.letterContainer.setPosition(\r\n                    this.originalLetterContainerPosition.x * scale,\r\n                    this.originalLetterContainerPosition.y  * scale\r\n                );\r\n                this.cardContainer.setPosition(\r\n                    this.originalCardContainerPosition.x * scale,\r\n                    this.originalCardContainerPosition.y  * scale\r\n                );\r\n                this.completedWordsContainer.setPosition(\r\n                    this.originalCompletedWordsContainerPosition.x * scale,\r\n                    this.originalCompletedWordsContainerPosition.y * scale\r\n                );\r\n                this.wordsContainer.setPosition(\r\n                    this.originalWordsContainerPosition.x * scale,\r\n                    this.originalWordsContainerPosition.y * scale\r\n                );\r\n\r\n                this.playWidget.getComponent(Widget).right = this.originalPlayWidgetRight;\r\n            }\r\n            else {\r\n                view.setDesignResolutionSize(this.originalHeigth, this.originalWidth, ResolutionPolicy.FIXED_HEIGHT);\r\n                this.letterContainer.setPosition(\r\n                    this.originalLetterContainerPosition.x * scale * 1.4,\r\n                    this.originalLetterContainerPosition.y  * scale* 1.4\r\n                );\r\n                this.cardContainer.setPosition(\r\n                    this.originalCardContainerPosition.x * scale* 1.7,\r\n                    this.originalCardContainerPosition.y  * scale / 1.7\r\n                );\r\n                this.completedWordsContainer.setPosition(\r\n                    this.originalCompletedWordsContainerPosition.x * scale * 1.5,\r\n                    this.originalCompletedWordsContainerPosition.y * scale* 2.2\r\n                );\r\n                this.wordsContainer.setPosition(\r\n                    this.originalWordsContainerPosition.x * scale * 3.1,\r\n                    this.originalWordsContainerPosition.y * scale * 3.1\r\n                );\r\n\r\n            }\r\n        }\r\n\r\n      \r\n        \r\n\r\n        this.letterContainer.setScale(this.originalLetterContainerScale.x * scale, this.originalLetterContainerScale.y * scale);\r\n        this.cardContainer.setScale(scale, scale);\r\n        this.completedWordsContainer.setScale(scale * 1.3, scale * 1.3);\r\n        this.playWidget.setScale(scale, scale);\r\n        this.win.setScale(scale, scale);\r\n        this.constName.setScale(scale, scale);\r\n        this.sentences.setScale(scale, scale);\r\n        this.background.setScale(scale, scale);\r\n        this.wordsContainer.setScale(scale, scale);\r\n\r\n        if (!currentHorizontalState) {\r\n\r\n            this.background.setScale(scale * 2, scale * 2);\r\n            this.letterContainer.setScale(this.originalLetterContainerScale.x * 1.7 * scale, this.originalLetterContainerScale.y * 1.7* scale);\r\n            this.cardContainer.setScale(scale * 1.7, scale * 1.7);\r\n            this.completedWordsContainer.setScale(scale * 2, scale * 2);\r\n            this.sentences.setScale(scale * 1.4, scale * 1.4);\r\n            this.wordsContainer.setScale(scale * 1.6, scale * 1.6);\r\n\r\n        }\r\n\r\n        \r\n       \r\n\r\n       \r\n        console.log(`Screen resized: width=${width}, height=${height}, scale=${scale}`);\r\n    }\r\n    \r\n    \r\n    \r\n}\r\n\r\n\r\n\r\n\r\n"]}