{"version":3,"sources":["file:///C:/ProgramData/cocos/editors/Creator/3.8.2/resources/app.asar.unpacked/modules/platform-extensions/extensions/adsense-h5g-plugin/static/adsense-h5g-api/h5_games_ads.ts"],"names":["showPrerollAd","game_instance","game","adBreak","type","adBreakDone","placementInfo","emit","PrerollAdEvent","AD_BREAK_DONE","e","console","log","showInterstitialAd","name","gameInstance","beforeAd","InterstitialAdEvent","BEFORE_AD","afterAd","AFTER_AD","requestRewardedAd","RewardedVideoAdEvent","beforeReward","showAdFn","showRewardedAdFn","BEFORE_REWARD","adDismissed","AD_DISMISSED","adViewed","AD_VIEWED","showRewardedAd","ADS_BY_GOOGLE","window","adsbygoogle","o","push"],"mappings":"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","sourcesContent":["import {game} from 'cc';\r\n\r\nimport {InterstitialCallback} from './interstitial_callback';\r\nimport {RewardedCallback} from './rewarded_callback';\r\nimport {PrerollCallback} from './preroll_callback';\r\nimport {InterstitialAdEvent, PrerollAdEvent, RewardedVideoAdEvent} from './ad_event';\r\nimport {InterstitialType} from './interstitial_type';\r\n\r\n// This is needed since there're no definition for AdSense object here.\r\n// tslint:disable-next-line:no-any\r\nconst ADS_BY_GOOGLE = (window as any).adsbygoogle;\r\ntype AdBreakCallback = InterstitialCallback|RewardedCallback|PrerollCallback;\r\n\r\nconst adBreak =\r\n(o: AdBreakCallback) => {\r\n  ADS_BY_GOOGLE.push(o);\r\n};\r\n\r\nlet showRewardedAdFn : (() => void) | null;\r\n\r\n/**\r\n * API to show Preroll Ad when available.\r\n * If there are no ad available this function will request an ad.\r\n */\r\nexport function  showPrerollAd(){\r\n    try {\r\n        const game_instance = game;\r\n        adBreak({\r\n            type: 'preroll',\r\n            adBreakDone: (placementInfo: any) => {\r\n                game_instance.emit(PrerollAdEvent.AD_BREAK_DONE);\r\n            },\r\n         });\r\n    } catch(e) {\r\n        console.log(e)\r\n    }\r\n}\r\n\r\n/**\r\n * API to show Interstitial Ad when available.\r\n * If there are no ad available this function will request an ad.\r\n */\r\nexport function showInterstitialAd(type: InterstitialType, name: string) {\r\n  try {\r\n    const gameInstance = game;\r\n    adBreak({\r\n      type,\r\n      name,\r\n      beforeAd: () => {\r\n        gameInstance.emit(InterstitialAdEvent.BEFORE_AD);\r\n      },\r\n      afterAd: () => {\r\n        gameInstance.emit(InterstitialAdEvent.AFTER_AD);\r\n      },\r\n      adBreakDone: (placementInfo: unknown) => {\r\n        gameInstance.emit(InterstitialAdEvent.AD_BREAK_DONE);\r\n      },\r\n    });\r\n  } catch (e) {\r\n    console.log(e);\r\n  }\r\n}\r\n\r\n/**\r\n * API to request Rewarded Ad.\r\n * To show the Rewarded Ad you could call showRewardedAd after\r\n * beforeReward callback.\r\n */\r\nexport function requestRewardedAd(name: string) {\r\n  try {\r\n    const gameInstance = game;\r\n    adBreak({\r\n      type: 'reward',\r\n      name,\r\n      beforeAd: () => {\r\n        gameInstance.emit(RewardedVideoAdEvent.BEFORE_AD);\r\n      },\r\n      afterAd: () => {\r\n        gameInstance.emit(RewardedVideoAdEvent.AFTER_AD);\r\n      },\r\n      adBreakDone: (placementInfo: unknown) => {\r\n        gameInstance.emit(RewardedVideoAdEvent.AD_BREAK_DONE);\r\n      },\r\n      beforeReward: (showAdFn: () => void) => {\r\n        showRewardedAdFn = showAdFn;\r\n        gameInstance.emit(RewardedVideoAdEvent.BEFORE_REWARD);\r\n      },\r\n      adDismissed: () => {\r\n        gameInstance.emit(RewardedVideoAdEvent.AD_DISMISSED);\r\n      },\r\n      adViewed: () => {\r\n        gameInstance.emit(RewardedVideoAdEvent.AD_VIEWED);\r\n      },\r\n    });\r\n  } catch (e) {\r\n    console.log(e);\r\n  }\r\n}\r\n\r\n/**\r\n * API to show Rewarded Ad when available.\r\n */\r\nexport function showRewardedAd() {\r\n  if (!showRewardedAdFn) {\r\n    console.log('No Rewarded Ad available');\r\n    return;\r\n  }\r\n  showRewardedAdFn();\r\n  showRewardedAdFn = null;\r\n}\r\n"]}